# 테이블과 엔티티 매핑

## DB 스키마 자동 생성 여부 설정
- hibernate.hbm2ddl.auto을 활용해서 애플리케이션 실행 시점에 DB 스키마 자동 생성 여부를 설정할 수 있다.

1. create : 기존 테이블을 삭제하고 새로 생성한다. DROP + CREATE
2. create-drop : create 속성에 추가로 애플리케이션을 종료할 떄 생성한 DDL을 제거한다. DROP + CREATE + DROP 
3. update : 데이터베이스 테이블과 엔티티 매핑정보를 비교해서 변경 사항만 수정한다. 
4. validate : 데이터베이스 테이블과 엔티티 매핑정보를 비교해서 차이가 있으면 경고를 남기고, 애플리케이션을 실행하지 않는다. 이 설정은 DDL을 수정하지 않는다.
5. none : 자동 생성 기능을 사용하지 않고 싶을 떄 사용한다.

> ✨ DB 스키마 자동 생성 옵션에 대한 실무 팁
> - 스테이징과 운영 서버 : `validate` 또는 `none`
> - 테스트 서버 : `validate` 또는 `update`
> - 개발 초기 단계 : `update` 또는 `create`
> - 초기화 상태로 자동화된 테스트를 진행하는 개발자 환경과 CI 서버 : `create-drop` 또는 `create`

>  콘솔에 실행되는 DDL을 출력하고 싶으면, 아래 옵션 설정
>  - hibernate.show_sql = true

## 테이블과 객체 매핑
### @Table
- 엔티티와 매핑할 테이블을 지정하는 어노테이션
```java

```

### @Entity
- JPA를 사용해서 테이블과 매핑할 클래스에 필수로 붙여주는 어노테이션
- 이 어노테이션을 붙인 클래스는 JPA가 관리한다.
- 단, 주의사항이 있다.
1. final 클래스, enum, interface, inner 클래스에는 사용할 수 없다.
2. 기본 생성자는 필수다. -> why? JPA가 엔티티 객체를 생성할 때, 기본 생성자를 사용하므로,
3. 저장할 필드에 final을 사용해서는 안된다.


## 기본키 매핑
### @Id
- 기본키를 애플리케이션에서 직접 할당한다.

### @GeneratedValue
- 대리키 사용 방식
> JPA가 제공하는 DB 기본 키 생성 전략
1. IDENTITY : 기본 키 생성을 DB에 위임한다. 
2. SEQUENCE : DB 시퀀스를 사용해서 기본키를 할당한다.
3. TABLE : 키 생성 테이블을 사용한다.
4. AUTO : 선택한 DB에 따라 위 옵션 중 하나를 자동으로 선택


## 필드와 컬럼 매핑
### @Column
- 객체 필드를 테이블 컬럼에 매핑할 떄 사용하는 어노테이션

### @Enumerated
- 자바의 enum 타입을 매핑할 때 사용하는 어노테이션
```java
@Enumerated(EnumType.STRING) // 이넘 타입을 String으로 사용하기를 권장
```


### @Temporal
- 날짜 타입을 매핑할 때 사용하는 어노테이션



### @Lob
- DB의 CLOB, BLOB 타입과 매핑할 때 사용하는 어노테이션
- 필드 타입이 문자면 CLOB으로 매핑하고, 나머지는 BLOB로 매핑한다.

### @Transient
- 해당 객체 필드를 DB에 매핑하고 싶지 않을 떄, 사용하는 어노테이션
- DB에 저장하지 않고, 조회하지도 않고, 객체에 임시로 어떤 값을 보관하고 싶을 때, 사용 

### @Access


## 연관관계 매핑
### @JoinColumn
### @ManyToOne
### @OneToMany
### @OneToOne
### @ManyToMany



## 상속관계 매핑
### @Inheritance
### @MappedSuperclass


